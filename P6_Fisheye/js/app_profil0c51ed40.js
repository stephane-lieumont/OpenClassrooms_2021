(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new P(n||[]);return o._invoke=function(t,e,r){var n=u;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=h(t,e,r);if("normal"===l.type){if(n=r.done?f:p,l.arg===_)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=f,r.method="throw",r.arg=l.arg)}}}(t,r,a),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",p="suspendedYield",d="executing",f="completed",_={};function m(){}function y(){}function g(){}var v={};l(v,o,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(C([])));k&&k!==r&&n.call(k,o)&&(v=k);var w=g.prototype=m.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var l=h(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=h(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return y.prototype=g,l(w,"constructor",g),l(g,"constructor",y),y.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(L.prototype),l(L.prototype,a,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new L(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;$(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function e(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}}var n=r(757),i=r.n(n);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var l=function(){function t(e){o(this,t),this._url=e}var r,n,a,l;return s(t,[{key:"getPhotographers",value:(l=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._url).then((function(t){return t.json()})).then((function(t){return t.photographers})).catch((function(t){throw new Error("La requete api getPhotographer a échoué : ",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getPhotographerById",value:(a=e(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._url).then((function(t){return t.json()})).then((function(t){return t.photographers.filter((function(t){return t.id===e}))[0]})).catch((function(t){throw new Error("La requete api getPhotographer a échoué : ",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getPortfolioByUserId",value:(n=e(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._url).then((function(t){return t.json()})).then((function(t){return t.media.filter((function(t){return t.photographerId===e}))})).catch((function(t){throw new Error("La requete api getPhotographer a échoué : ",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getAllMedias",value:(r=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._url).then((function(t){return t.json()})).then((function(t){return t.media})).catch((function(t){throw new Error("La requete api getPhotographer a échoué : ",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]),t}(),c=function(){function t(e){o(this,t),this._profilPath="assets/photographers/",this._id=e.id,this._name=e.name,this._city=e.city,this._country=e.country,this._tagline=e.tagline,this._price=e.price,this._portrait=e.portrait,this._portfolio=[],this._templatePhotographer=null,this._templatePortfolio=null,this._templateModal=null,this._templateFilter=null}return s(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"city",get:function(){return this._city}},{key:"country",get:function(){return this._country}},{key:"tagline",get:function(){return this._tagline}},{key:"price",get:function(){return this._price}},{key:"portrait",get:function(){return this._profilPath+this._portrait}},{key:"portfolio",get:function(){return this._portfolio},set:function(t){this._portfolio=t}},{key:"likes",get:function(){return this._caluculateLikes()}},{key:"templatePhotographer",get:function(){return this._templatePhotographer},set:function(t){this._templatePhotographer=t}},{key:"templatePortfolio",get:function(){return this._templatePortfolio},set:function(t){this._templatePortfolio=t}},{key:"templateModal",get:function(){return this._templateModal},set:function(t){this._templateModal=t}},{key:"templateFilter",get:function(){return this._templateFilter},set:function(t){this._templateFilter=t}},{key:"addPortfolioMedia",value:function(t){this._portfolio.push(t),this._likes+=t.likes}},{key:"removePortfolioMedia",value:function(t){this._portfolio=this._portfolio.filter((function(e){return e!==t})),this._likes-=t.likes}},{key:"_caluculateLikes",value:function(){var t=0;return this._portfolio.forEach((function(e){t+=e.likes})),t}}]),t}();function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&h(t,e)}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}var m=function(){function t(e,r){o(this,t),this._id=e.id,this._photographer=r,this._date=new Date(e.date),this._likes=e.likes,this._price=e.price,this._title=e.title,this._userLike=!1,this._description=e.alt,this._template=null}return s(t,[{key:"id",get:function(){return this._id}},{key:"date",get:function(){return this._date}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t,this._userLike=!this._userLike}},{key:"userLike",get:function(){return this._userLike}},{key:"price",get:function(){return this._price}},{key:"description",get:function(){return this._description}},{key:"title",get:function(){return this._title}},{key:"photographer",get:function(){return this._photographer}},{key:"template",get:function(){return this._template},set:function(t){this._template=t}}]),t}(),y=function(t){u(r,t);var e=_(r);function r(t){var n;return o(this,r),(n=e.call(this,t))._type="picture",n._image=t.image,n._imageThumbPath="assets/portfolio/".concat(t.photographerId,"/medium/").concat(n._image),n._imagePath="assets/portfolio/".concat(t.photographerId,"/large/").concat(n._image),n}return s(r,[{key:"thumbPath",get:function(){return this._imageThumbPath}},{key:"path",get:function(){return this._imagePath}},{key:"image",get:function(){return this._image}},{key:"type",get:function(){return this._type}}]),r}(m),g=function(t){u(r,t);var e=_(r);function r(t){var n;return o(this,r),(n=e.call(this,t))._type="video",n._video=t.video,n._videoThumbPath="assets/portfolio/".concat(t.photographerId,"/medium/").concat(n._video.split(".").slice(0,-1).join("."),".jpg"),n._videoPath="assets/portfolio/".concat(t.photographerId,"/").concat(n._video),n}return s(r,[{key:"thumbPath",get:function(){return this._videoThumbPath}},{key:"path",get:function(){return this._videoPath}},{key:"video",get:function(){return this._video}},{key:"type",get:function(){return this._type}}]),r}(m),v=function(){function t(e){o(this,t),this._photographer=e,this.$wrapperCard=null,this.$wrapperHeader=null,this.$wrapperLink=null,this.$buttonModal=null}return s(t,[{key:"btnModal",get:function(){return this.$buttonModal}},{key:"createPhotographerCard",value:function(){this.$wrapperCard=document.createElement("li");var t='      \n      <article class="photographer">\n        <a href="photographer.html?id='.concat(this._photographer.id,'" aria-label="').concat(this._photographer.name,'">\n          <div class="photographer__cover">\n            <img width="100" src="').concat(this._photographer.portrait,'" alt="').concat(this._photographer.name,'" />\n          </div>        \n          <h2 class="photographer__title">').concat(this._photographer.name,'</h2>        \n        </a>\n          <ul class="photographer__infos">\n            <li class="photographer__infos__local text--primary">').concat(this._photographer.city,", ").concat(this._photographer.country,'</li>\n            <li class="photographer__infos__tagline">').concat(this._photographer.tagline,'</li>\n            <li class="photographer__infos__price text--grey">').concat(this._photographer.price,"€/jour</li>\n          </ul>\n      </article>      \n    ");return this.$wrapperCard.innerHTML=t,this.$wrapperCard}},{key:"createPhotographerHeader",value:function(){this.$wrapperHeader=document.createElement("div"),this.$wrapperHeader.classList.add("photographer-header");var t='\n      <div class="photographer__content">\n        <h1 class="photographer__content__title display-h2">'.concat(this._photographer.name,'</h1>\n        <p class="photographer__content__description">\n          <span class="photographer__content__description__local text--primary">').concat(this._photographer.city,'</span>\n          <span class="photographer__content__description__tag text--grey">').concat(this._photographer.tagline,'</span>\n        </p>\n      </div>\n      <div class="photographer__actions">\n        <button class="button" aria-label="Contact Me" aria-haspopup="dialog" aria-controls="contact-modal">Contactez-moi</button>\n      </div>\n      <div class="photographer__cover">\n        <img width="100" src="').concat(this._photographer.portrait,'" alt="Mimi Keel">\n      </div>\n    ');return this.$wrapperHeader.innerHTML=t,this.$buttonModal=this.$wrapperHeader.querySelector('[aria-controls="contact-modal"]'),this.$wrapperHeader}},{key:"createPhotographerContentLink",value:function(){this.$wrapperLink=document.createElement("aside"),this.$wrapperLink.classList.add("photographer-content-link");var t='\n      <div class="photographer-content-link__like">'.concat(this._photographer.likes,'</div>\n      <div class="photographer-content-link__price">').concat(this._photographer.price,"€ / jour</div>\n    ");return this.$wrapperLink.innerHTML=t,this.$wrapperLink}},{key:"refreshPhotographerContentLink",value:function(){if(!this.$wrapperLink)throw new Error("$wrapperLink not exist yet, createPhotographerContentLink before");this.$wrapperLink.querySelector(".photographer-content-link__like").innerHTML="".concat(this._photographer.likes),this.$wrapperLink.querySelector(".photographer-content-link__price").innerHTML="".concat(this._photographer.price," € / jour")}}]),t}(),b=function(){function t(e){o(this,t),this._photographer=e,this.$wrapperModal=null}return s(t,[{key:"modalHtmlElement",get:function(){return this.$wrapperModal}},{key:"closeButtonHtmlElement",get:function(){return this.$wrapperModal.querySelector('[data-dismiss="contact-modal"]')}},{key:"sendButtonHtmlElement",get:function(){return this.$wrapperModal.querySelector('button[type="submit"]')}},{key:"createContactModal",value:function(){this.$wrapperModal=document.createElement("div"),this.$wrapperModal.id="contact-modal",this.$wrapperModal.style.display="none",this.$wrapperModal.setAttribute("role","dialog"),this.$wrapperModal.setAttribute("aria-labelledby","contact-modal__title"),this.$wrapperModal.setAttribute("aria-hidden","true"),this.$wrapperModal.setAttribute("tabindex","-1");var t='\n      <div class="modal" role="document" data-stop-propagation>\n        <header>\n          <h2 id="contact-modal__title">Contactez-moi<br />'.concat(this._photographer.name,'</h2>\n          <span class="material-icons button__close" role="button" aria-label="Close Contact form" title="Fermer cette fenêtre modale" data-dismiss="contact-modal" tabindex="0">close</span>\n        </header>\n        <form action="#" method="post">\n          <div>\n            <label id="label-form-firstname" for="form-firstname">Prénom</label>\n            <input type="text" name="firstname" id="form-firstname" aria-labelledby="label-form-firstname" required minlength="2"/>\n          </div>\n          <div>\n            <label id="label-form-lastname" for="form-lastname">Nom</label>\n            <input type="text" name="lastname" id="form-lastname" aria-labelledby="label-form-lastname" required minlength="2"/>\n          </div>\n          <div>\n            <label id="label-form-email" for="form-email">Email</label>\n            <input type="email" name="email" id="form-email" aria-labelledby="label-form-email" required/>\n          </div>\n          <div>\n            <label id="label-form-message" for="form-message">Votre message</label>\n            <textarea name="message" id="form-message" rows="5" placeholder=" " aria-labelledby="label-form-message" required minlength="10"></textarea>\n          </div>\n          <button class="button" type="submit" aria-label="Send" >Envoyer</button>\n        </form>\n      </div>\n    ');return this.$wrapperModal.innerHTML=t,this.$wrapperModal}}]),t}(),k=function(){function t(e){o(this,t),this._photographer=e,this.$wrapperListCards=null}return s(t,[{key:"mediasHtmlElement",get:function(){return this.$wrapperListCards}},{key:"createListMedia",value:function(){var t=this;return this.$wrapperListCards=document.createElement("ul"),this.$wrapperListCards.classList.add("media-cards-list"),this._photographer.portfolio.forEach((function(e){var r=new w(t._photographer,e);e.template=r,t.$wrapperListCards.appendChild(r.createCardMedia("li"))})),this.$wrapperListCards}},{key:"refreshListMedia",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=this.$wrapperListCards.parentNode;r.classList.remove("loaded"),r.classList.add("loading");var n=setTimeout((function(){r.removeChild(t.$wrapperListCards),r.appendChild(t.createListMedia()),r.classList.remove("loading"),r.classList.add("loaded"),e(),clearTimeout(n)}),300)}}]),t}(),w=function(){function t(e,r){o(this,t),this._photographer=e,this._media=r,this.$wrapperCard=null}return s(t,[{key:"mediaHtmlElement",get:function(){return this.$wrapperCard}},{key:"createCardMedia",value:function(t){this.$wrapperCard=document.createElement(t),this.$wrapperCard.classList.add("media-card"),this.$wrapperCard.classList.add("media-card--".concat(this._media.type));var e='         \n      <a href="'.concat(this._media.path,'" class="media-card__cover" aria-label="').concat(this._media.title,', closeup view">          \n        <img width="100" src="').concat(this._media.thumbPath,'" alt="').concat(this._media.description,", ").concat(this._media.type,'"/>        \n      </a> \n      <div class="media-card__content">\n        <h2 class="media-card__content__title">').concat(this._media.title,'</h2>\n        <div class="media-card__content__like favorite">\n          <label for="like-').concat(this._media.id,'" class="favorite__counter">').concat(this._media.likes,'</label>\n          <input id="like-').concat(this._media.id,'" aria-label="likes" class="favorite__input" type="checkbox" />\n        </div>\n      </div>\n    ');return this.$wrapperCard.innerHTML=e,this.$wrapperCard.querySelector("#like-".concat(this._media.id)).checked=this._media.userLike,this._stateLikesListener(),this.$wrapperCard}},{key:"_stateLikesListener",value:function(){var t=this;this.$wrapperCard.querySelector('input[type="checkbox"]').addEventListener("click",(function(e){e.target.checked?t._media.likes+=1:t._media.likes-=1,t.$wrapperCard.querySelector("label.favorite__counter").innerHTML=t._media.likes,t._photographer.templatePhotographer.refreshPhotographerContentLink()}))}}]),t}(),x=function(){function t(){o(this,t),this.$wrapper=null,this._observerNode=null}return s(t,[{key:"filterHtmlElement",get:function(){return this.$wrapper}},{key:"observerNode",get:function(){return this._observerNode}},{key:"createFilter",value:function(){this.$wrapper=document.createElement("div"),this.$wrapper.classList.add("filter-selector");return this.$wrapper.innerHTML='         \n      <h3 id="filter__title">Trier par</h3>\n      <div class="selector" data-filter-value="popularity">\n        <button id="filter__toggle" class="selector__toggle" aria-expanded="false" aria-haspopup="listbox"><span class="material-icons">expand_more</span></button>\n        <ul role="listbox" aria-label="filtrer" class="selector__list" tabindex="-1" aria-activedescendant="filter__option1" >\n          <li id="filter__option1" role="option" class="selector__item selector__item--1" tabindex="-1" data-filter-option="popularity" aria-labelledby="filter__title" aria-selected="true">Popularité</li>\n          <li id="filter__option2" role="option" class="selector__item selector__item--2" tabindex="-1" data-filter-option="date" aria-labelledby="filter__title">Date</li>\n          <li id="filter__option3" role="option" class="selector__item selector__item--3" tabindex="-1" data-filter-option="title" aria-labelledby="filter__title">Titre</li>\n        </ul>\n      </div>\n    ',this._observerNode=this.$wrapper.querySelector(".selector"),this.$wrapper}}]),t}(),L=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'button, a, input, textarea, [role="button"]';o(this,t),this._node=e.modalHtmlElement,this._closeNode=e.closeButtonHtmlElement,this._sendButton=e.sendButtonHtmlElement,this._ariaSelector=r,this._previousFocus=null,this._modalDisplay=null,this._ariaElements=[],this._stopPropagation=this._stopPropagation.bind(this),this._ariaModal=this._ariaModal.bind(this),this._closeModal=this.closeModal.bind(this),this._displayModal=this.displayModal.bind(this),this._sendEmail=this._sendEmail.bind(this)}return s(t,[{key:"init",value:function(t){var e=this;this._node.style.display="none",this._closeNode&&this._closeNode.addEventListener("click",this._closeModal),this._sendButton.addEventListener("click",(function(){e._sendEmail()})),t.addEventListener("click",(function(){return e.displayModal()}))}},{key:"element",get:function(){return this._node}},{key:"previousFocus",get:function(){return this._previousFocus}},{key:"displayModal",value:function(){this._node.style.display=null,this._node.removeAttribute("aria-hidden"),this._node.setAttribute("aria-modal",!0),this._previousFocus=document.querySelector(":focus"),this._ariaElements=Array.from(this._node.querySelectorAll(this._ariaSelector)),this._node.addEventListener("click",this._closeModal),this._node.querySelector("[data-stop-propagation]").addEventListener("click",this._stopPropagation),window.addEventListener("keydown",this._ariaModal),this._modalDisplay=!0}},{key:"closeModal",value:function(){null!==this._previousFocus&&this._previousFocus.focus(),this._node.style.display="none",this._node.setAttribute("aria-hidden",!0),this._node.removeAttribute("aria-modal"),this._node.removeEventListener("click",this._closeModal),this._node.querySelector("[data-stop-propagation]").removeEventListener("click",this._stopPropagation),window.removeEventListener("keydown",this._ariaModal),this._modalDisplay=!1}},{key:"_stopPropagation",value:function(t){t.stopPropagation()}},{key:"_ariaModal",value:function(t){"Escape"!==t.key&&"Esc"!==t.key||(t.preventDefault(),this._closeModal()),this._node.querySelector(":focus")===this._closeNode&&"Enter"===t.key&&(t.preventDefault(),this._closeModal()),"Tab"===t.key&&null!==this._node&&(t.preventDefault(),this._focusInModal(t))}},{key:"_focusInModal",value:function(t){var e=this;t.preventDefault();var r=this._ariaElements.findIndex((function(t){return t===e._node.querySelector(":focus")}));!0===t.shiftKey?r--:r++,r>=this._ariaElements.length&&(r=0),r<0&&(r=this._ariaElements.length-1),this._ariaElements[r].focus()}},{key:"_sendEmail",value:function(){var t=this._node.querySelector("form");if(t.checkValidity()){var e=new FormData(t);console.log("ENVOI DE L'EMAIL:"),console.log("******************"),console.log("Prenom : ",e.get("firstname")),console.log("Nom : ",e.get("lastname")),console.log("Email : ",e.get("email")),console.log("message : "),console.log(e.get("message")),t.reset()}}}]),t}(),E=function(){function t(e,r){o(this,t),this._expandButton=e.filterHtmlElement.querySelector("[aria-expanded]"),this._selector=e.filterHtmlElement.querySelector(".selector"),this._photographer=r,this._selectorItems=Array.from(this._selector.querySelectorAll(".selector__item")),this._selectedItem=this._selectorItems[0],this._value=this._selectorItems[0].dataset.filterOption,this._expandHeight=this._selectedItem.clientHeight*this._selectorItems.length-2+"px",this._expand=!1,this._ariaEventListener=this._ariaEventListener.bind(this),this._expandListener=this._expandListener.bind(this),this._expandMenu=this._expandMenu.bind(this),this._unexpandMenu=this._unexpandMenu.bind(this)}return s(t,[{key:"value",get:function(){return this._value}},{key:"init",value:function(){this.filterPortfolio(),this._expandListener()}},{key:"filterPortfolio",value:function(){switch(this._selector.dataset.filterValue=this._value,this._value){case"popularity":this._photographer.portfolio.sort((function(t,e){return e.likes-t.likes}));break;case"date":this._photographer.portfolio.sort((function(t,e){return e.date-t.date}));break;case"title":this._photographer.portfolio.sort((function(t,e){return e.title>t.title?-1:t.title>e.title?1:0}))}}},{key:"_expandListener",value:function(){var t=this;this._expandButton.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t._selector.classList.toggle("active"),t._expand?(t._unexpandMenu(),t._expandButton.focus()):t._expandMenu()})),this._selector.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t._expand||t._expandMenu()})),this._selectorItems.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t._expand&&t._selectItem(e.target)}))})),this._expandButton.addEventListener("keydown",(function(e){32!==e.keyCode||t._expand||t._expandMenu()}))}},{key:"_expandMenu",value:function(){this._expand=!0,this._expandButton.setAttribute("aria-expanded",!0),this._selector.style.height=this._expandHeight,this._selector.classList.add("active"),this._selectorItems[0].focus(),this._selector.addEventListener("keydown",this._ariaEventListener),document.addEventListener("click",this._unexpandMenu)}},{key:"_unexpandMenu",value:function(){this._expand=!1,this._expandButton.setAttribute("aria-expanded",!1),this._selector.style.height="",this._selector.classList.remove("active"),this._selector.removeEventListener("keydown",this._ariaEventListener),document.removeEventListener("click",this._unexpandMenu)}},{key:"_selectItem",value:function(t){var e=this;this._selectedItem=t,this._value=t.dataset.filterOption,this.filterPortfolio(),this._selectorItems=this._selectorItems.filter((function(e){return e!==t})),this._selectorItems.unshift(t);var r=1;this._selectorItems.forEach((function(t){t.className="selector__item",t.classList.add("selector__item--".concat(r)),t.removeAttribute("aria-selected"),t===e._selectedItem&&(t.classList.add("selected"),t.setAttribute("aria-selected",!0)),r++})),this._unexpandMenu()}},{key:"_ariaEventListener",value:function(t){var e=this;if(t.preventDefault(),"Escape"!==t.key&&"Esc"!==t.key||(this._unexpandMenu(),this._expandButton.focus()),"Enter"===t.key&&(this._selector.querySelector(":focus")!==this._selectedItem?(this._selectItem(this._selector.querySelector(":focus")),this._expandButton.focus()):(this._unexpandMenu(),this._expandButton.focus())),"Tab"===t.key&&(this._unexpandMenu(),this._expandButton.focus()),"ArrowUp"===t.key||"ArrowDown"===t.key){var r=this._selectorItems.findIndex((function(t){return t===e._selector.querySelector(":focus")}));"ArrowUp"===t.key?r--:r++,r>=this._selectorItems.length&&(r=0),r<0&&(r=this._selectorItems.length-1),this._selectorItems[r].focus()}}}]),t}(),M=function(){function t(e){o(this,t),this._media=e,this.$wrapperLightbox=null,this.$lightboxContent=null,this.$lightboxCloseButton=null,this.$lightboxNextButton=null,this.$lightboxPrevButton=null,this.$media=null}return s(t,[{key:"lightBoxHTMLElement",get:function(){return this.$wrapperLightbox}},{key:"contentHTMLElement",get:function(){return this.$lightboxContent}},{key:"closeButton",get:function(){return this.$lightboxCloseButton}},{key:"nextButton",get:function(){return this.$lightboxNextButton}},{key:"prevButton",get:function(){return this.$lightboxPrevButton}},{key:"media",get:function(){return this.$media}},{key:"createLightBox",value:function(){var t=document.createElement("aside");t.setAttribute("aria-label","image closeup view"),t.classList.add("lightbox");return t.innerHTML='\n        <button class="lightbox__close material-icons" aria-label="Close dialog">close</button>\n        <button class="lightbox__next material-icons" aria-label="Next Image">arrow_forward_ios</button>\n        <button class="lightbox__prev material-icons" aria-label="Previous Image">arrow_back_ios</button>\n        <div class="lightbox__container">\n          <div class="lightbox__container__content"></div>             \n        </div>\n      ',this.$lightboxContent=t.querySelector(".lightbox__container__content"),this.$lightboxCloseButton=t.querySelector(".lightbox__close"),this.$lightboxNextButton=t.querySelector(".lightbox__next"),this.$lightboxPrevButton=t.querySelector(".lightbox__prev"),this.$wrapperLightbox=t,t}},{key:"loadFactory",value:function(t){if(this._media=t,"picture"===this._media.type)this._loadImage();else{if("video"!==this._media.type)throw new Error("Le média avec un type : ".concat(this._media.type," est incompatible"));this._loadVideo()}}},{key:"_loadImage",value:function(){var t=this,e=new Image;e.src=this._media.path,e.alt=this._media.description,e.setAttribute("aria-labelledby","picture-title"),e.setAttribute("tabindex","0");var r=document.createElement("div");r.classList.add("lightbox__loader"),this.$lightboxContent.innerHTML="",this.$lightboxContent.appendChild(r),this.$media=e,e.onload=function(){t.$lightboxContent.removeChild(r);var n=document.createElement("h2");n.id="picture-title",n.innerHTML=t._media.title,t.$lightboxContent.appendChild(e),t.$lightboxContent.appendChild(n)}}},{key:"_loadVideo",value:function(){var t=document.createElement("video");t.src=this._media.path,t.setAttribute("title",this._media.description),t.setAttribute("tabindex","0"),t.autoplay=!0,this.$media=t;var e=document.createElement("h2");e.id="picture-title",e.innerHTML=this._media.title,this.$lightboxContent.innerHTML="",this.$lightboxContent.appendChild(t),this.$lightboxContent.appendChild(e)}}]),t}(),$=function(){function t(e,r){o(this,t),this._media=r,this._photographer=e,this._template=new M(this._media),this._controls=void 0,this._onKeyUp=this._onKeyUp.bind(this),this._close=this._close.bind(this),this._next=this._next.bind(this),this._prev=this._prev.bind(this)}return s(t,[{key:"init",value:function(){document.body.appendChild(this._template.createLightBox()),document.addEventListener("keydown",this._onKeyUp),this._template.closeButton.addEventListener("click",this._close),this._template.nextButton.addEventListener("click",this._next),this._template.prevButton.addEventListener("click",this._prev),this._template.loadFactory(this._media),this._controls=[this._template.media,this._template.closeButton,this._template.prevButton,this._template.nextButton]}},{key:"_next",value:function(t){var e=this;t.preventDefault();var r=this._photographer.portfolio.findIndex((function(t){return t.id===e._media.id}));r===this._photographer.portfolio.length-1&&(r=-1),this._media=this._photographer.portfolio[r+1],this._template.loadFactory(this._media)}},{key:"_prev",value:function(t){var e=this;t.preventDefault();var r=this._photographer.portfolio.findIndex((function(t){return t.id===e._media.id}));0===r&&(r=this._photographer.portfolio.length),this._media=this._photographer.portfolio[r-1],this._template.loadFactory(this._media)}},{key:"_close",value:function(t){var e=this;t.preventDefault(),this._template.lightBoxHTMLElement.classList.add("fadeout");var r=setTimeout((function(){e._template.lightBoxHTMLElement.parentNode.removeChild(e._template.lightBoxHTMLElement),clearTimeout(r)}),500);document.removeEventListener("keydown",this._onKeyUp)}},{key:"_onKeyUp",value:function(t){"Escape"!==t.key&&"Esc"!==t.key||this._close(t),"ArrowLeft"===t.key&&this._prev(t),"ArrowRight"===t.key&&this._next(t),"Tab"===t.key&&this._focusInLightBox(t)}},{key:"_focusInLightBox",value:function(t){var e=this;t.preventDefault();var r=this._controls.findIndex((function(t){return t===e._template.lightBoxHTMLElement.querySelector(":focus")}));!0===t.shiftKey?r--:r++,r>=this._controls.length&&(r=0),r<0&&(r=this._controls.length-1),this._controls[r].focus()}}]),t}();function P(){return(P=e(i().mark((function t(){var e,r,n,o,a,s,h,u,p,d,f,_,m;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.querySelector("#profil"),r=document.querySelector("#portfolio"),n=document.querySelector("#filter"),o=[],a=new l("data/photographers_new.json"),s=window.location.search,h=new URLSearchParams(s),u=parseInt(h.get("id")),t.next=10,a.getPhotographerById(u);case 10:return p=t.sent,t.next=13,a.getPortfolioByUserId(u);case 13:t.sent.forEach((function(t){t.image?o.push(new y(t)):t.video&&o.push(new g(t))})),(d=new c(p)).portfolio=o,d.templatePhotographer=new v(d),d.templatePortfolio=new k(d),d.templateModal=new b(d),d.templateFilter=new x,e.appendChild(d.templatePhotographer.createPhotographerHeader()),e.appendChild(d.templatePhotographer.createPhotographerContentLink()),e.appendChild(d.templateModal.createContactModal()),n.appendChild(d.templateFilter.createFilter()),f=new L(d.templateModal),new E(d.templateFilter,d).init(),f.init(d.templatePhotographer.btnModal),r.appendChild(d.templatePortfolio.createListMedia()),r.classList.add("loaded"),C(d),_=d.templateFilter.observerNode,m={attributes:!0,attributeFilter:["data-filter-value"]},new MutationObserver((function(){d.templatePortfolio.refreshListMedia((function(){C(d)}))})).observe(_,m);case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){t.portfolio.forEach((function(e){Array.from(e.template.mediaHtmlElement.querySelectorAll("a")).forEach((function(r){r.addEventListener("click",(function(r){r.preventDefault();var n=setTimeout((function(){clearTimeout(n)}),500);new $(t,e).init()}))}))}))}!function(){P.apply(this,arguments)}()})()})();
//# sourceMappingURL=app_profil0c51ed40.js.map